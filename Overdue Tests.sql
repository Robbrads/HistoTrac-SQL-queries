/*Main*/
Select  patient.lastnm as LastNm, patient.firstnm as FirstNm, patient.patientid as PatientID, patient.servicinghospitalid as ServicingHospitalID, sample.sampledt as SampleDt, sample.sampleid as SampleID, sample.logtime as LogTime, test.testtypecd as TestTypeCd, test.signedoffdt as SignedOffDt, test.billdt as BillDt, test.nobillind as NoBillInd, hospital.hospitalid as HospitalID, hospital.hospitalnm as HospitalNm, test.statuscd as statuscd, '' as assignedtoID, '' as EmployeeLastNm, '' as EmployeeFirstNm,'' as AssignedtoOrgID,'' as OrgNm, testdefinition.TATCnt as TATCnt, test.testdt as TestDt from testdefinition, patient left join hospital on hospital.hospitalid = patient.servicinghospitalid left join sample on sample.patientid = patient.patientid left join test on test.sampleid = sample.sampleid where test.testtypecd = testdefinition.testtypecd and test.statuscd = 'signed off' and testdefinition.testclasscd <> 'fee' and testdefinition.tatcnt is not null and test.testdt between CAST (convert (varchar(11), '<From Date>') as datetime) and  CAST (convert (varchar (11), '<To Date>') + ' 23:59:59' as datetime)  order by test.testtypecd asc, patient.lastnm asc, patient.firstnm asc